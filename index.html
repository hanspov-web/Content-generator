<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#9333EA">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Content Generator">
    <meta name="description" content="Generate social media content ideas with photo prompts, captions, and hashtags">
    
    <title>Content Idea Generator</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>âœ¨</text></svg>">
    
    <!-- Apple Touch Icon -->
    <link rel="apple-touch-icon" href="icon-192.png">
    
    <!-- Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- React and ReactDOM from CDN -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel Standalone for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        * {
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            overscroll-behavior: none;
        }
        
        #root {
            min-height: 100vh;
            min-height: -webkit-fill-available;
        }
        
        /* Smooth scrolling */
        html {
            scroll-behavior: smooth;
        }
        
        /* Hide scrollbar but keep functionality */
        ::-webkit-scrollbar {
            width: 6px;
        }
        
        ::-webkit-scrollbar-track {
            background: transparent;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #CBD5E0;
            border-radius: 3px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #A0AEC0;
        }

        /* Loading spinner */
        .loading-spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #9333EA;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Install prompt styles */
        .install-prompt {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: white;
            padding: 16px 24px;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            z-index: 1000;
            display: none;
            max-width: 90%;
        }

        .install-prompt.show {
            display: block;
            animation: slideUp 0.3s ease-out;
        }

        @keyframes slideUp {
            from {
                transform: translateX(-50%) translateY(100px);
                opacity: 0;
            }
            to {
                transform: translateX(-50%) translateY(0);
                opacity: 1;
            }
        }
    </style>
</head>
<body>
    <div id="root">
        <div style="display: flex; justify-content: center; align-items: center; min-height: 100vh; background: linear-gradient(to bottom right, #FAF5FF, #FDF2F8, #EFF6FF);">
            <div class="loading-spinner"></div>
        </div>
    </div>

    <!-- Install Prompt -->
    <div id="installPrompt" class="install-prompt">
        <div style="margin-bottom: 12px; font-weight: 600; color: #1F2937;">Install Content Generator</div>
        <div style="margin-bottom: 12px; font-size: 14px; color: #6B7280;">Add to home screen for quick access</div>
        <div style="display: flex; gap: 8px;">
            <button id="installBtn" style="flex: 1; background: #9333EA; color: white; padding: 8px 16px; border-radius: 8px; border: none; font-weight: 600; cursor: pointer;">
                Install
            </button>
            <button id="dismissBtn" style="background: #F3F4F6; color: #6B7280; padding: 8px 16px; border-radius: 8px; border: none; font-weight: 600; cursor: pointer;">
                Not Now
            </button>
        </div>
    </div>

    <script type="text/babel">
        const { useState, useEffect } = React;
        const { Sparkles, Camera, Hash, Music, Type, Instagram, Facebook, Video, Image, Plus, X, RefreshCw, Download, Copy, Check, BookOpen, Archive, Trash2, CheckCircle, Circle } = lucide;

        const ContentGenerator = () => {
          const [contentPillars, setContentPillars] = useState([
            'Conscious Spending & Saving',
            'Kitchen & Nourishment',
            'Home as Sanctuary',
            'Healthier Living',
            'Intentional Travel'
          ]);
          const [newPillar, setNewPillar] = useState('');
          const [selectedPillars, setSelectedPillars] = useState([]);
          const [selectedPlatforms, setSelectedPlatforms] = useState(['Instagram', 'TikTok', 'Pinterest']);
          const [generatedContent, setGeneratedContent] = useState(null);
          const [isGenerating, setIsGenerating] = useState(false);
          const [copiedField, setCopiedField] = useState('');
          const [activeView, setActiveView] = useState('generator');
          const [library, setLibrary] = useState([]);
          const [selectedLibraryPillar, setSelectedLibraryPillar] = useState('all');
          const [showPosted, setShowPosted] = useState(false);
          const [isLoadingLibrary, setIsLoadingLibrary] = useState(true);

          const platforms = [
            { name: 'Instagram', icon: Instagram, color: 'bg-pink-500' },
            { name: 'TikTok', icon: Video, color: 'bg-black' },
            { name: 'Pinterest', icon: Image, color: 'bg-red-600' },
            { name: 'Facebook', icon: Facebook, color: 'bg-blue-600' }
          ];

          const contentIdeas = {
            'Conscious Spending & Saving': [
              { topic: 'Budget Breakdown', photo: 'Flat lay of monthly budget planner with coffee, calculator, and pen', overlay: 'My $X Budget That Changed Everything', hook: 'realistic budgeting for real life' },
              { topic: 'Money-Saving Win', photo: 'Before/after price comparison screenshots or receipt', overlay: 'Saved $XX This Month', hook: 'small changes that add up' },
              { topic: 'No-Spend Challenge', photo: 'Calendar with days crossed off or pantry/fridge contents', overlay: 'Day X of No-Spend Challenge', hook: 'what I learned from spending nothing' },
              { topic: 'Frugal Find', photo: 'Product in hand or in use in your home', overlay: 'Worth Every Penny Under $XX', hook: 'affordable quality that lasts' },
              { topic: 'Financial Mistake', photo: 'Relatable candid moment or symbolic image', overlay: 'This Cost Me $XXX', hook: 'expensive lessons I learned' }
            ],
            'Kitchen & Nourishment': [
              { topic: 'Quick Recipe', photo: 'Step-by-step cooking process or final plated dish', overlay: 'Ready in 15 Minutes', hook: 'easy weeknight dinner wins' },
              { topic: 'Meal Prep Sunday', photo: 'Organized containers of prepped food', overlay: 'Feeds Us All Week', hook: 'meal prep that actually works' },
              { topic: 'Pantry Staples', photo: 'Organized pantry or key ingredients laid out', overlay: 'Always In My Kitchen', hook: 'basics that make everything easier' },
              { topic: 'Kitchen Hack', photo: 'Hands demonstrating technique or tool in action', overlay: 'Why Didn\'t I Know This?', hook: 'game-changing kitchen tricks' },
              { topic: 'Grocery Haul', photo: 'Groceries arranged on counter by category', overlay: '$XX Grocery Haul', hook: 'feeding a family on a budget' }
            ],
            'Home as Sanctuary': [
              { topic: 'Room Refresh', photo: 'Before/after split screen or transformed space', overlay: '$XX Room Makeover', hook: 'budget-friendly home transformation' },
              { topic: 'Organization System', photo: 'Newly organized drawer, closet, or space', overlay: 'Finally Organized', hook: 'simple systems that stay organized' },
              { topic: 'Decor Dupe', photo: 'Expensive item vs affordable alternative side-by-side', overlay: 'Expensive Look, Budget Price', hook: 'high-end style for less' },
              { topic: 'Cleaning Routine', photo: 'Cleaning in action or sparkling clean result', overlay: 'My 20-Minute Reset', hook: 'quick cleaning that makes a difference' },
              { topic: 'Thrift Flip', photo: 'Thrifted item before and after transformation', overlay: 'Thrifted for $X', hook: 'secondhand treasures made new' }
            ],
            'Healthier Living': [
              { topic: 'Product Swap', photo: 'Conventional product vs non-toxic alternative', overlay: 'Made the Switch', hook: 'safer swaps for everyday products' },
              { topic: 'Morning Routine', photo: 'Morning wellness activities in sequence', overlay: 'How I Start My Day', hook: 'simple rituals that changed everything' },
              { topic: 'Non-Toxic Favorites', photo: 'Curated collection of clean products', overlay: 'My Top 5 Clean Swaps', hook: 'products worth the investment' },
              { topic: 'Wellness Habit', photo: 'You practicing the habit or results', overlay: 'Did This for 30 Days', hook: 'small habit, big impact' },
              { topic: 'Label Reading', photo: 'Close-up of product label with ingredients highlighted', overlay: 'Red Flags I Avoid', hook: 'what to watch out for' }
            ],
            'Intentional Travel': [
              { topic: 'Packing Strategy', photo: 'Packed suitcase overhead view or packing cubes', overlay: 'Everything for X Days', hook: 'minimal packing made easy' },
              { topic: 'Budget Travel Tip', photo: 'Travel scene or money-saving moment', overlay: 'Saved $XXX on This Trip', hook: 'travel hacks that work' },
              { topic: 'Hidden Gem', photo: 'Beautiful lesser-known location', overlay: 'No Crowds Here', hook: 'underrated places to visit' },
              { topic: 'Travel Essentials', photo: 'Flat lay of travel must-haves', overlay: 'Never Travel Without', hook: 'items that make travel easier' },
              { topic: 'Weekend Getaway', photo: 'Destination highlights collage', overlay: 'Perfect for a Long Weekend', hook: 'quick trips near [your city]' }
            ]
          };

          const soundSuggestions = {
            'Budget Breakdown': ['Motivational instrumental', 'Success sounds', 'Planning/organization audio'],
            'Money-Saving Win': ['Celebration sounds', 'Win sound effects', 'Upbeat pop'],
            'Recipe': ['Cooking sounds', 'Satisfying ASMR', 'Upbeat cooking trends'],
            'Room Refresh': ['Transformation audio', 'Before/after trending sounds', 'Home improvement music'],
            'Product Swap': ['Educational voiceover trends', 'Informative audio', 'Wellness sounds'],
            'Travel': ['Adventure music', 'Travel vlogs audio', 'Wanderlust trends'],
            'General': ['Trending audio in your niche', 'Popular sounds under 30 days old', 'Original audio with trending hashtags']
          };

          // Load library from localStorage on mount
          useEffect(() => {
            try {
              const saved = localStorage.getItem('content-library');
              if (saved) {
                setLibrary(JSON.parse(saved));
              }
            } catch (error) {
              console.log('No existing library found');
            } finally {
              setIsLoadingLibrary(false);
            }
          }, []);

          // Save library to localStorage whenever it changes
          useEffect(() => {
            if (!isLoadingLibrary) {
              try {
                localStorage.setItem('content-library', JSON.stringify(library));
              } catch (error) {
                console.error('Failed to save library:', error);
              }
            }
          }, [library, isLoadingLibrary]);

          const generateHashtags = (pillar, topic, platforms) => {
            const baseHashtags = {
              'Conscious Spending & Saving': ['#budgeting', '#personalfinance', '#moneysavingtips', '#frugalliving', '#financialfreedom', '#budgetfriendly', '#savemoney', '#financetips', '#debtfree', '#moneytok'],
              'Kitchen & Nourishment': ['#easyrecipes', '#mealprep', '#homecooking', '#foodie', '#healthyeating', '#cookingtips', '#kitchenhacks', '#dinnerideas', '#mealprepmonday', '#recipeideas'],
              'Home as Sanctuary': ['#homedecor', '#homeorganization', '#decoronabudget', '#homerefresh', '#organizedhome', '#homeinspo', '#decorideas', '#organizingtips', '#hometransformation', '#homesweethome'],
              'Healthier Living': ['#nontoxicliving', '#cleanliving', '#wellnessjourney', '#healthylifestyle', '#nontoxichome', '#cleanbeauty', '#wellnesstips', '#holistichealth', '#toxinfree', '#healthyliving'],
              'Intentional Travel': ['#traveltips', '#budgettravel', '#travelonabudget', '#travelhacks', '#wanderlust', '#travelgram', '#explore', '#travelinspo', '#weekendgetaway', '#travelguide']
            };

            const platformSpecific = {
              'Instagram': ['#reels', '#reelsinstagram', '#instadaily'],
              'TikTok': ['#fyp', '#foryou', '#viral'],
              'Pinterest': ['#pinterestideas', '#pinterestinspired'],
              'Facebook': ['#facebookreels']
            };

            let hashtags = [...(baseHashtags[pillar] || [])];
            
            platforms.forEach(platform => {
              if (platformSpecific[platform]) {
                hashtags = [...hashtags, ...platformSpecific[platform]];
              }
            });

            hashtags.push('#lifestyle', '#contentcreator', '#dailylife');
            return hashtags.slice(0, 20);
          };

          const generateCaption = (pillar, idea) => {
            const hooks = [
              `Let's talk about ${idea.hook}...`,
              `Here's the truth about ${idea.hook}:`,
              `Real talk: ${idea.hook}`,
              `Can we normalize ${idea.hook}?`,
              `${idea.topic} edition ðŸ‘‡`,
              `Save this for later! ${idea.topic}:`,
              `You asked for ${idea.topic.toLowerCase()}, so here it is:`
            ];

            const ctas = [
              '\n\nWhat would you add to this list? ðŸ‘‡',
              '\n\nDrop a ðŸ™Œ if you needed this!',
              '\n\nSave this for later and follow for more!',
              '\n\nTry this and let me know how it goes!',
              '\n\nWhich one surprised you the most?',
              '\n\nComment your favorite tip below! ðŸ’¬',
              '\n\nShare this with someone who needs it! âœ¨'
            ];

            const hook = hooks[Math.floor(Math.random() * hooks.length)];
            const cta = ctas[Math.floor(Math.random() * ctas.length)];

            return `${hook}\n\n[Share 3-5 key points or steps about your ${idea.topic.toLowerCase()} here]\n${cta}`;
          };

          const getPlatformSpecifics = (platform, idea, pillar) => {
            const specifics = {
              'Instagram': {
                format: 'Reel (15-60 seconds)',
                aspectRatio: '9:16 (vertical)',
                tips: [
                  'Hook viewers in first 3 seconds',
                  'Use trending audio under 30 days old',
                  'Add captions for sound-off viewing',
                  'Include CTA in caption and video end screen',
                  'Post during peak hours: 11am-1pm or 7pm-9pm'
                ],
                captionLength: '2,200 characters max (keep first 125 compelling)',
                hashtagStrategy: 'Use 10-15 hashtags, mix of large and niche'
              },
              'TikTok': {
                format: 'Video (15-90 seconds, shorter performs better)',
                aspectRatio: '9:16 (vertical)',
                tips: [
                  'First frame must stop the scroll',
                  'Use trending sounds from For You page',
                  'On-screen text is crucial',
                  'Engage with comments in first hour',
                  'Post 1-4pm or 7-10pm for best reach'
                ],
                captionLength: '2,200 characters (keep it punchy)',
                hashtagStrategy: 'Use 3-5 hashtags max, include niche + trending'
              },
              'Pinterest': {
                format: 'Idea Pin (carousel) or static Pin',
                aspectRatio: '2:3 (1000x1500px ideal)',
                tips: [
                  'Create vertical, high-quality images',
                  'Include keyword-rich titles',
                  'Text overlay should be large and clear',
                  'Link to blog or affiliate page',
                  'Pin consistently for best algorithm favor'
                ],
                captionLength: '500 characters (keyword-focused)',
                hashtagStrategy: 'Use 3-10 hashtags, focus on searchable keywords'
              },
              'Facebook': {
                format: 'Reel or traditional post',
                aspectRatio: '9:16 (vertical Reel) or 1:1 (square post)',
                tips: [
                  'Longer captions perform well',
                  'Ask questions to drive engagement',
                  'Tag relevant groups or pages',
                  'Cross-post from Instagram Reels',
                  'Post 1-4pm for engagement'
                ],
                captionLength: 'No limit (but keep scannable)',
                hashtagStrategy: 'Use 2-3 hashtags, less important than other platforms'
              }
            };
            return specifics[platform] || {};
          };

          const addPillar = () => {
            if (newPillar.trim() && !contentPillars.includes(newPillar.trim())) {
              setContentPillars([...contentPillars, newPillar.trim()]);
              setNewPillar('');
            }
          };

          const removePillar = (pillar) => {
            setContentPillars(contentPillars.filter(p => p !== pillar));
            setSelectedPillars(selectedPillars.filter(p => p !== pillar));
          };

          const togglePillar = (pillar) => {
            setSelectedPillars(prev =>
              prev.includes(pillar) ? prev.filter(p => p !== pillar) : [...prev, pillar]
            );
          };

          const togglePlatform = (platform) => {
            setSelectedPlatforms(prev =>
              prev.includes(platform) ? prev.filter(p => p !== platform) : [...prev, platform]
            );
          };

          const generateContent = () => {
            if (selectedPillars.length === 0) {
              alert('Please select at least one content pillar');
              return;
            }
            if (selectedPlatforms.length === 0) {
              alert('Please select at least one platform');
              return;
            }

            setIsGenerating(true);
            
            setTimeout(() => {
              const randomPillar = selectedPillars[Math.floor(Math.random() * selectedPillars.length)];
              const ideas = contentIdeas[randomPillar] || [];
              const randomIdea = ideas[Math.floor(Math.random() * ideas.length)];

              const content = {
                id: Date.now(),
                pillar: randomPillar,
                topic: randomIdea.topic,
                photoPrompt: randomIdea.photo,
                textOverlay: randomIdea.overlay,
                caption: generateCaption(randomPillar, randomIdea),
                hashtags: generateHashtags(randomPillar, randomIdea.topic, selectedPlatforms),
                soundSuggestions: soundSuggestions[randomIdea.topic.split(' ')[0]] || soundSuggestions['General'],
                platforms: selectedPlatforms.map(platform => ({
                  name: platform,
                  ...getPlatformSpecifics(platform, randomIdea, randomPillar)
                })),
                posted: false,
                createdAt: new Date().toISOString()
              };

              setGeneratedContent(content);
              setIsGenerating(false);
            }, 1000);
          };

          const saveToLibrary = () => {
            if (!generatedContent) return;
            
            const exists = library.some(item => item.id === generatedContent.id);
            if (exists) {
              alert('This content idea is already in your library!');
              return;
            }

            setLibrary([generatedContent, ...library]);
            alert('Saved to library!');
          };

          const togglePosted = (id) => {
            setLibrary(library.map(item => 
              item.id === id ? { ...item, posted: !item.posted } : item
            ));
          };

          const deleteFromLibrary = (id) => {
            if (confirm('Are you sure you want to delete this content idea?')) {
              setLibrary(library.filter(item => item.id !== id));
            }
          };

          const getFilteredLibrary = () => {
            let filtered = library;

            if (selectedLibraryPillar !== 'all') {
              filtered = filtered.filter(item => item.pillar === selectedLibraryPillar);
            }

            filtered = filtered.filter(item => item.posted === showPosted);

            return filtered;
          };

          const getLibraryStats = () => {
            const total = library.length;
            const available = library.filter(item => !item.posted).length;
            const posted = library.filter(item => item.posted).length;
            
            const byPillar = {};
            contentPillars.forEach(pillar => {
              byPillar[pillar] = library.filter(item => item.pillar === pillar && !item.posted).length;
            });

            return { total, available, posted, byPillar };
          };

          const copyToClipboard = async (text, field) => {
            try {
              await navigator.clipboard.writeText(text);
              setCopiedField(field);
              setTimeout(() => setCopiedField(''), 2000);
            } catch (err) {
              console.error('Failed to copy:', err);
            }
          };

          const exportContent = () => {
            if (!generatedContent) return;

            const exportText = `
CONTENT IDEA
============
Pillar: ${generatedContent.pillar}
Topic: ${generatedContent.topic}

PHOTO/VIDEO PROMPT
==================
${generatedContent.photoPrompt}

TEXT OVERLAY
============
${generatedContent.textOverlay}

CAPTION
=======
${generatedContent.caption}

HASHTAGS
========
${generatedContent.hashtags.join(' ')}

SOUND SUGGESTIONS
=================
${generatedContent.soundSuggestions.join('\n')}

PLATFORM SPECIFICS
==================
${generatedContent.platforms.map(p => `
${p.name}
---------
Format: ${p.format}
Aspect Ratio: ${p.aspectRatio}
Caption Length: ${p.captionLength}
Hashtag Strategy: ${p.hashtagStrategy}

Tips:
${p.tips.map((tip, i) => `${i + 1}. ${tip}`).join('\n')}
`).join('\n')}
            `.trim();

            const blob = new Blob([exportText], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `content-idea-${generatedContent.topic.toLowerCase().replace(/\s+/g, '-')}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
          };

          return (
            <div className="min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 p-4 md:p-8">
              <div className="max-w-6xl mx-auto">
                {/* Header */}
                <div className="text-center mb-8">
                  <div className="flex items-center justify-center gap-2 mb-2">
                    <Sparkles className="w-8 h-8 text-purple-600" />
                    <h1 className="text-4xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent">
                      Content Idea Generator
                    </h1>
                  </div>
                  <p className="text-gray-600">Create multi-platform content ideas in seconds</p>
                  
                  {/* Navigation */}
                  <div className="flex justify-center gap-4 mt-6">
                    <button
                      onClick={() => setActiveView('generator')}
                      className={`flex items-center gap-2 px-6 py-3 rounded-lg font-semibold transition ${
                        activeView === 'generator'
                          ? 'bg-purple-600 text-white shadow-lg'
                          : 'bg-white text-gray-700 hover:bg-gray-50'
                      }`}
                    >
                      <Sparkles className="w-5 h-5" />
                      Generator
                    </button>
                    <button
                      onClick={() => setActiveView('library')}
                      className={`flex items-center gap-2 px-6 py-3 rounded-lg font-semibold transition relative ${
                        activeView === 'library'
                          ? 'bg-purple-600 text-white shadow-lg'
                          : 'bg-white text-gray-700 hover:bg-gray-50'
                      }`}
                    >
                      <BookOpen className="w-5 h-5" />
                      Library
                      {library.length > 0 && (
                        <span className="absolute -top-2 -right-2 bg-pink-500 text-white text-xs font-bold rounded-full w-6 h-6 flex items-center justify-center">
                          {library.filter(item => !item.posted).length}
                        </span>
                      )}
                    </button>
                  </div>
                </div>

                {/* Main Content */}
                {activeView === 'generator' ? (
                <div className="grid md:grid-cols-3 gap-6">
                  {/* Left Panel - Settings */}
                  <div className="md:col-span-1 space-y-6">
                    {/* Content Pillars */}
                    <div className="bg-white rounded-xl shadow-lg p-6">
                      <h2 className="text-xl font-bold text-gray-800 mb-4">Content Pillars</h2>
                      
                      {/* Add New Pillar */}
                      <div className="flex gap-2 mb-4">
                        <input
                          type="text"
                          value={newPillar}
                          onChange={(e) => setNewPillar(e.target.value)}
                          onKeyPress={(e) => e.key === 'Enter' && addPillar()}
                          placeholder="Add custom pillar..."
                          className="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                        />
                        <button
                          onClick={addPillar}
                          className="p-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition"
                        >
                          <Plus className="w-5 h-5" />
                        </button>
                      </div>

                      {/* Pillar List */}
                      <div className="space-y-2">
                        {contentPillars.map((pillar) => (
                          <div
                            key={pillar}
                            className={`flex items-center justify-between p-3 rounded-lg border-2 cursor-pointer transition ${
                              selectedPillars.includes(pillar)
                                ? 'border-purple-500 bg-purple-50'
                                : 'border-gray-200 hover:border-gray-300'
                            }`}
                            onClick={() => togglePillar(pillar)}
                          >
                            <span className="text-sm font-medium text-gray-700">{pillar}</span>
                            <button
                              onClick={(e) => {
                                e.stopPropagation();
                                removePillar(pillar);
                              }}
                              className="text-gray-400 hover:text-red-500 transition"
                            >
                              <X className="w-4 h-4" />
                            </button>
                          </div>
                        ))}
                      </div>
                    </div>

                    {/* Platforms */}
                    <div className="bg-white rounded-xl shadow-lg p-6">
                      <h2 className="text-xl font-bold text-gray-800 mb-4">Platforms</h2>
                      <div className="grid grid-cols-2 gap-3">
                        {platforms.map(({ name, icon: Icon, color }) => (
                          <button
                            key={name}
                            onClick={() => togglePlatform(name)}
                            className={`flex flex-col items-center gap-2 p-4 rounded-lg border-2 transition ${
                              selectedPlatforms.includes(name)
                                ? 'border-purple-500 bg-purple-50'
                                : 'border-gray-200 hover:border-gray-300'
                            }`}
                          >
                            <div className={`${color} text-white p-2 rounded-lg`}>
                              <Icon className="w-5 h-5" />
                            </div>
                            <span className="text-sm font-medium text-gray-700">{name}</span>
                          </button>
                        ))}
                      </div>
                    </div>

                    {/* Generate Button */}
                    <button
                      onClick={generateContent}
                      disabled={isGenerating}
                      className="w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white py-4 rounded-xl font-bold text-lg shadow-lg hover:shadow-xl transition transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none"
                    >
                      {isGenerating ? (
                        <span className="flex items-center justify-center gap-2">
                          <RefreshCw className="w-5 h-5 animate-spin" />
                          Generating...
                        </span>
                      ) : (
                        <span className="flex items-center justify-center gap-2">
                          <Sparkles className="w-5 h-5" />
                          Generate Content Idea
                        </span>
                      )}
                    </button>
                  </div>

                  {/* Right Panel - Generated Content */}
                  <div className="md:col-span-2">
                    {generatedContent ? (
                      <div className="bg-white rounded-xl shadow-lg p-6 space-y-6">
                        {/* Header */}
                        <div className="flex items-center justify-between border-b pb-4">
                          <div>
                            <div className="text-sm text-purple-600 font-semibold mb-1">
                              {generatedContent.pillar}
                            </div>
                            <h2 className="text-2xl font-bold text-gray-800">
                              {generatedContent.topic}
                            </h2>
                          </div>
                          <div className="flex gap-2">
                            <button
                              onClick={saveToLibrary}
                              className="flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition"
                            >
                              <BookOpen className="w-4 h-4" />
                              Save
                            </button>
                            <button
                              onClick={exportContent}
                              className="flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition"
                            >
                              <Download className="w-4 h-4" />
                            </button>
                          </div>
                        </div>

                        {/* Photo Prompt */}
                        <div className="bg-blue-50 rounded-lg p-4">
                          <div className="flex items-center justify-between mb-2">
                            <div className="flex items-center gap-2">
                              <Camera className="w-5 h-5 text-blue-600" />
                              <h3 className="font-bold text-gray-800">Photo/Video Prompt</h3>
                            </div>
                            <button
                              onClick={() => copyToClipboard(generatedContent.photoPrompt, 'photo')}
                              className="text-blue-600 hover:text-blue-700 transition"
                            >
                              {copiedField === 'photo' ? <Check className="w-4 h-4" /> : <Copy className="w-4 h-4" />}
                            </button>
                          </div>
                          <p className="text-gray-700">{generatedContent.photoPrompt}</p>
                        </div>

                        {/* Text Overlay */}
                        <div className="bg-purple-50 rounded-lg p-4">
                          <div className="flex items-center justify-between mb-2">
                            <div className="flex items-center gap-2">
                              <Type className="w-5 h-5 text-purple-600" />
                              <h3 className="font-bold text-gray-800">Text Overlay</h3>
                            </div>
                            <button
                              onClick={() => copyToClipboard(generatedContent.textOverlay, 'overlay')}
                              className="text-purple-600 hover:text-purple-700 transition"
                            >
                              {copiedField === 'overlay' ? <Check className="w-4 h-4" /> : <Copy className="w-4 h-4" />}
                            </button>
                          </div>
                          <p className="text-gray-700 font-medium">{generatedContent.textOverlay}</p>
                        </div>

                        {/* Caption */}
                        <div className="bg-pink-50 rounded-lg p-4">
                          <div className="flex items-center justify-between mb-2">
                            <h3 className="font-bold text-gray-800">Caption Template</h3>
                            <button
                              onClick={() => copyToClipboard(generatedContent.caption, 'caption')}
                              className="text-pink-600 hover:text-pink-700 transition"
                            >
                              {copiedField === 'caption' ? <Check className="w-4 h-4" /> : <Copy className="w-4 h-4" />}
                            </button>
                          </div>
                          <p className="text-gray-700 whitespace-pre-line">{generatedContent.caption}</p>
                        </div>

                        {/* Hashtags */}
                        <div className="bg-green-50 rounded-lg p-4">
                          <div className="flex items-center justify-between mb-2">
                            <div className="flex items-center gap-2">
                              <Hash className="w-5 h-5 text-green-600" />
                              <h3 className="font-bold text-gray-800">Hashtags</h3>
                            </div>
                            <button
                              onClick={() => copyToClipboard(generatedContent.hashtags.join(' '), 'hashtags')}
                              className="text-green-600 hover:text-green-700 transition"
                            >
                              {copiedField === 'hashtags' ? <Check className="w-4 h-4" /> : <Copy className="w-4 h-4" />}
                            </button>
                          </div>
                          <div className="flex flex-wrap gap-2">
                            {generatedContent.hashtags.map((tag, i) => (
                              <span key={i} className="text-sm bg-green-100 text-green-700 px-2 py-1 rounded">
                                {tag}
                              </span>
                            ))}
                          </div>
                        </div>

                        {/* Sound Suggestions */}
                        <div className="bg-yellow-50 rounded-lg p-4">
                          <div className="flex items-center gap-2 mb-2">
                            <Music className="w-5 h-5 text-yellow-600" />
                            <h3 className="font-bold text-gray-800">Sound Suggestions</h3>
                          </div>
                          <ul className="space-y-1">
                            {generatedContent.soundSuggestions.map((sound, i) => (
                              <li key={i} className="text-gray-700 text-sm">â€¢ {sound}</li>
                            ))}
                          </ul>
                        </div>

                        {/* Platform Specifics */}
                        <div>
                          <h3 className="font-bold text-gray-800 mb-3">Platform Guidelines</h3>
                          <div className="space-y-4">
                            {generatedContent.platforms.map((platform) => {
                              const platformInfo = platforms.find(p => p.name === platform.name);
                              const Icon = platformInfo?.icon;
                              
                              return (
                                <div key={platform.name} className="border border-gray-200 rounded-lg p-4">
                                  <div className="flex items-center gap-2 mb-3">
                                    {Icon && <Icon className="w-5 h-5" />}
                                    <h4 className="font-bold text-gray-800">{platform.name}</h4>
                                  </div>
                                  <div className="space-y-2 text-sm text-gray-700">
                                    <p><strong>Format:</strong> {platform.format}</p>
                                    <p><strong>Aspect Ratio:</strong> {platform.aspectRatio}</p>
                                    <p><strong>Caption Length:</strong> {platform.captionLength}</p>
                                    <p><strong>Hashtag Strategy:</strong> {platform.hashtagStrategy}</p>
                                    <div>
                                      <strong>Tips:</strong>
                                      <ul className="mt-1 space-y-1 ml-4">
                                        {platform.tips.map((tip, i) => (
                                          <li key={i} className="text-xs">â€¢ {tip}</li>
                                        ))}
                                      </ul>
                                    </div>
                                  </div>
                                </div>
                              );
                            })}
                          </div>
                        </div>
                      </div>
                    ) : (
                      <div className="bg-white rounded-xl shadow-lg p-12 text-center">
                        <Sparkles className="w-16 h-16 text-gray-300 mx-auto mb-4" />
                        <h3 className="text-xl font-bold text-gray-400 mb-2">No Content Generated Yet</h3>
                        <p className="text-gray-500">
                          Select your content pillars and platforms, then click "Generate Content Idea"
                        </p>
                      </div>
                    )}
                  </div>
                </div>
                ) : (
                  /* Library View */
                  <div>
                    {/* Library Stats and Filters */}
                    <div className="grid md:grid-cols-4 gap-4 mb-6">
                      {/* Stats Cards */}
                      <div className="bg-white rounded-xl shadow-lg p-6">
                        <div className="text-sm text-gray-600 mb-1">Total Ideas</div>
                        <div className="text-3xl font-bold text-purple-600">{getLibraryStats().total}</div>
                      </div>
                      <div className="bg-white rounded-xl shadow-lg p-6">
                        <div className="text-sm text-gray-600 mb-1">Available</div>
                        <div className="text-3xl font-bold text-green-600">{getLibraryStats().available}</div>
                      </div>
                      <div className="bg-white rounded-xl shadow-lg p-6">
                        <div className="text-sm text-gray-600 mb-1">Posted</div>
                        <div className="text-3xl font-bold text-gray-400">{getLibraryStats().posted}</div>
                      </div>
                      <div className="bg-white rounded-xl shadow-lg p-6">
                        <div className="text-sm text-gray-600 mb-1">Quick Action</div>
                        <button
                          onClick={() => setActiveView('generator')}
                          className="w-full mt-2 bg-purple-600 text-white py-2 rounded-lg hover:bg-purple-700 transition text-sm font-semibold"
                        >
                          Generate New
                        </button>
                      </div>
                    </div>

                    {/* Filters */}
                    <div className="bg-white rounded-xl shadow-lg p-6 mb-6">
                      <h3 className="font-bold text-gray-800 mb-4">Filter Content</h3>
                      
                      {/* Status Toggle */}
                      <div className="flex gap-4 mb-4">
                        <button
                          onClick={() => setShowPosted(false)}
                          className={`flex-1 py-2 px-4 rounded-lg font-semibold transition ${
                            !showPosted
                              ? 'bg-green-100 text-green-700 border-2 border-green-500'
                              : 'bg-gray-100 text-gray-600 hover:bg-gray-200'
                          }`}
                        >
                          <div className="flex items-center justify-center gap-2">
                            <Circle className="w-4 h-4" />
                            Available ({getLibraryStats().available})
                          </div>
                        </button>
                        <button
                          onClick={() => setShowPosted(true)}
                          className={`flex-1 py-2 px-4 rounded-lg font-semibold transition ${
                            showPosted
                              ? 'bg-gray-200 text-gray-700 border-2 border-gray-400'
                              : 'bg-gray-100 text-gray-600 hover:bg-gray-200'
                          }`}
                        >
                          <div className="flex items-center justify-center gap-2">
                            <Archive className="w-4 h-4" />
                            Posted ({getLibraryStats().posted})
                          </div>
                        </button>
                      </div>

                      {/* Pillar Filter */}
                      <div className="space-y-2">
                        <label className="text-sm font-semibold text-gray-700">Filter by Content Pillar:</label>
                        <select
                          value={selectedLibraryPillar}
                          onChange={(e) => setSelectedLibraryPillar(e.target.value)}
                          className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                        >
                          <option value="all">All Pillars</option>
                          {contentPillars.map(pillar => (
                            <option key={pillar} value={pillar}>
                              {pillar} ({getLibraryStats().byPillar[pillar] || 0})
                            </option>
                          ))}
                        </select>
                      </div>
                    </div>

                    {/* Library Grid */}
                    <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                      {getFilteredLibrary().length === 0 ? (
                        <div className="col-span-full bg-white rounded-xl shadow-lg p-12 text-center">
                          <BookOpen className="w-16 h-16 text-gray-300 mx-auto mb-4" />
                          <h3 className="text-xl font-bold text-gray-400 mb-2">
                            {showPosted ? 'No Posted Content Yet' : 'No Available Content'}
                          </h3>
                          <p className="text-gray-500 mb-4">
                            {showPosted 
                              ? 'Mark content as posted to see it here'
                              : 'Generate content ideas to build your library'
                            }
                          </p>
                          {!showPosted && (
                            <button
                              onClick={() => setActiveView('generator')}
                              className="bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 transition font-semibold"
                            >
                              Generate Your First Idea
                            </button>
                          )}
                        </div>
                      ) : (
                        getFilteredLibrary().map((item) => (
                          <div key={item.id} className="bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition">
                            {/* Card Header */}
                            <div className={`p-4 ${item.posted ? 'bg-gray-100' : 'bg-purple-50'}`}>
                              <div className="flex items-start justify-between mb-2">
                                <div className="text-xs font-semibold text-purple-600">{item.pillar}</div>
                                <div className="flex gap-1">
                                  <button
                                    onClick={() => togglePosted(item.id)}
                                    className={`p-1 rounded transition ${
                                      item.posted 
                                        ? 'text-gray-600 hover:text-gray-700' 
                                        : 'text-green-600 hover:text-green-700'
                                    }`}
                                    title={item.posted ? 'Mark as available' : 'Mark as posted'}
                                  >
                                    {item.posted ? <CheckCircle className="w-5 h-5" /> : <Circle className="w-5 h-5" />}
                                  </button>
                                  <button
                                    onClick={() => deleteFromLibrary(item.id)}
                                    className="p-1 text-red-400 hover:text-red-600 transition"
                                    title="Delete"
                                  >
                                    <Trash2 className="w-5 h-5" />
                                  </button>
                                </div>
                              </div>
                              <h3 className="font-bold text-gray-800 text-lg">{item.topic}</h3>
                            </div>

                            {/* Card Body */}
                            <div className="p-4 space-y-3">
                              <div>
                                <div className="text-xs font-semibold text-gray-500 mb-1">Photo Prompt</div>
                                <p className="text-sm text-gray-700 line-clamp-2">{item.photoPrompt}</p>
                              </div>
                              
                              <div>
                                <div className="text-xs font-semibold text-gray-500 mb-1">Text Overlay</div>
                                <p className="text-sm font-medium text-purple-600">{item.textOverlay}</p>
                              </div>

                              <div>
                                <div className="text-xs font-semibold text-gray-500 mb-1">Platforms</div>
                                <div className="flex flex-wrap gap-1">
                                  {item.platforms.map((p, i) => {
                                    const platformInfo = platforms.find(pl => pl.name === p.name);
                                    const Icon = platformInfo?.icon;
                                    return (
                                      <span key={i} className="inline-flex items-center gap-1 text-xs bg-gray-100 px-2 py-1 rounded">
                                        {Icon && <Icon className="w-3 h-3" />}
                                        {p.name}
                                      </span>
                                    );
                                  })}
                                </div>
                              </div>

                              <div className="pt-2 border-t">
                                <button
                                  onClick={() => {
                                    setGeneratedContent(item);
                                    setActiveView('generator');
                                  }}
                                  className="w-full text-sm font-semibold text-purple-600 hover:text-purple-700 transition"
                                >
                                  View Full Details â†’
                                </button>
                              </div>
                            </div>
                          </div>
                        ))
                      )}
                    </div>
                  </div>
                )}
              </div>
            </div>
          );
        };

        // Initialize Lucide icons
        lucide.createIcons();

        // Render the app
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<ContentGenerator />);
    </script>

    <script>
        // Service Worker Registration
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('service-worker.js')
                    .then(registration => {
                        console.log('Service Worker registered:', registration);
                    })
                    .catch(error => {
                        console.log('Service Worker registration failed:', error);
                    });
            });
        }

        // Install Prompt Logic
        let deferredPrompt;
        const installPrompt = document.getElementById('installPrompt');
        const installBtn = document.getElementById('installBtn');
        const dismissBtn = document.getElementById('dismissBtn');

        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            
            // Check if user has dismissed before
            const dismissed = localStorage.getItem('installPromptDismissed');
            if (!dismissed) {
                setTimeout(() => {
                    installPrompt.classList.add('show');
                }, 3000);
            }
        });

        installBtn.addEventListener('click', async () => {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                const { outcome } = await deferredPrompt.userChoice;
                console.log(`User response: ${outcome}`);
                deferredPrompt = null;
            }
            installPrompt.classList.remove('show');
        });

        dismissBtn.addEventListener('click', () => {
            installPrompt.classList.remove('show');
            localStorage.setItem('installPromptDismissed', 'true');
        });

        // Check if already installed
        if (window.matchMedia('(display-mode: standalone)').matches) {
            console.log('App is running as PWA');
        }
    </script>
</body>
</html>
